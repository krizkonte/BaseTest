/* ==========================================================================
   SURFACE SYSTEM
   Defines contextual background colors and sets local CSS variables 
   for child elements to adapt their text and interaction colors.
   ========================================================================== */
@layer utilities {
  /* Base surface properties that all surfaces inherit */
  .surface-default,
  .surface-inverted,
  .surface-accent,
  .surface-danger {
    background-color: var(--surface-bg);
    color: var(--text-color);
  }
  /* --------------------------------------------------------------------------
   *  Default Surface
   *  The standard background for the application.
   * -------------------------------------------------------------------------- */
  .surface-default {
    --surface-bg: light-dark(
      oklch(var(--neutral-50)),
      oklch(var(--neutral-900))
    );

    /* Contextual Variables for Children */
    --text-color: light-dark(
      oklch(var(--neutral-900)),
      oklch(var(--neutral-50))
    );
    --text-color-secondary: light-dark(
      oklch(var(--neutral-700)),
      oklch(var(--neutral-200) / var(--opacity-90))
    );
    --text-color-tertiary: light-dark(
      oklch(var(--neutral-600) / var(--opacity-90)),
      oklch(var(--neutral-400))
    );
    --text-color-disabled: light-dark(
      oklch(var(--neutral-500) / var(--opacity-70)),
      oklch(var(--neutral-400) / var(--opacity-60))
    );

    --bg-hover-ghost: light-dark(
      oklch(var(--brand-300) / var(--opacity-30)),
      oklch(var(--brand-400) / var(--opacity-30))
    );
    --bg-active-ghost: light-dark(
      oklch(var(--brand-500) / var(--opacity-10)),
      oklch(var(--brand-500) / var(--opacity-10))
    );
    --text-color-hover-ghost: light-dark(
      oklch(var(--brand-700)),
      oklch(var(--brand-50))
    );
  }

  /* --------------------------------------------------------------------------
   *  Accent Surface
   *  For primary actions and highlighted areas.
   * -------------------------------------------------------------------------- */
  .surface-accent {
    --surface-bg: light-dark(oklch(var(--brand-600)), oklch(var(--brand-600)));

    /* Contextual Variables for Children */
    --text-color: oklch(var(--white));
    --text-color-secondary: oklch(var(--brand-50) / var(--opacity-90));
    --text-color-tertiary: oklch(var(--brand-50) / var(--opacity-90));
    --text-color-disabled: oklch(var(--brand-100) / var(--opacity-70));

    --bg-hover: oklch(var(--brand-400));
    --bg-active: oklch(var(--brand-600));
    --bg-hover-ghost: oklch(var(--brand-50) / var(--opacity-30));
    --bg-active-ghost: oklch(var(--brand-50) / var(--opacity-20));
  }

  /* --------------------------------------------------------------------------
   *  Danger Surface
   *  For destructive actions and error states.
   * -------------------------------------------------------------------------- */
  .surface-danger {
    --surface-bg: light-dark(
      oklch(var(--danger-700)),
      oklch(var(--danger-600))
    );

    /* Contextual Variables for Children */
    --text-color: oklch(var(--white));
    --text-color-secondary: oklch(var(--danger-50) / var(--opacity-90));
    --text-color-tertiary: oklch(var(--danger-50) / var(--opacity-90));
    --text-color-disabled: oklch(var(--danger-100) / var(--opacity-70));

    --bg-hover: oklch(var(--danger-400));
    --bg-active: oklch(var(--danger-600));
    --bg-hover-ghost: oklch(var(--danger-50) / var(--opacity-30));
    --bg-active-ghost: oklch(var(--danger-50) / var(--opacity-20));
  }

  /* Text utilities for specific surface contexts */
  .text-surface-secondary {
    color: var(--text-color-secondary);
  }

  .text-surface-tertiary {
    color: var(--text-color-tertiary);
  }

  .text-surface-disabled {
    color: var(--text-color-disabled);
  }

  /* ==========================================================================
     SEMANTIC TEXT UTILITIES
     ========================================================================== */

  /* Success text color */
  .text-success {
    color: light-dark(oklch(var(--success-600)), oklch(var(--success-300)));
  }

  /* Warning text color */
  .text-warning {
    color: light-dark(oklch(var(--warning-600)), oklch(var(--warning-300)));
  }

  /* Error text color */
  .text-error {
    color: light-dark(oklch(var(--danger-600)), oklch(var(--danger-300)));
  }

  /* Info text color */
  .text-info {
    color: light-dark(oklch(var(--info-600)), oklch(var(--info-300)));
  }

  /* Link text color */
  .text-link {
    color: light-dark(oklch(var(--brand-600)), oklch(var(--brand-300)));
  }

  /* Link hover text color */
  .text-link:hover {
    color: light-dark(oklch(var(--brand-700)), oklch(var(--brand-400)));
    text-decoration: underline;
  }

  /* Brand text color */
  .text-brand {
    color: oklch(var(--brand-500));
  }
}

/* --------------------------------------------------------------------------
CONTEXTUAL INTERACTION LAYERS
-------------------------------------------------------------------------- */

/* --------------------------------------------------------------------------
   *  Interactive
   *  Transparent element that reveals a background on interaction.
   *  Adapts to the context provided by the parent surface.
   * -------------------------------------------------------------------------- */
@utility interactive {
  cursor: pointer;
  transition: background-color 150ms ease-in-out, color 150ms ease-in-out;
  &:hover:not(:disabled) {
    background-color: var(--bg-hover);
    color: var(--text-color);
  }

  &:active:not(:disabled) {
    background-color: var(--bg-active);
  }

  &:disabled {
    color: var(--text-color-disabled);
    cursor: not-allowed;
  }

  &.ghost {
    background-color: transparent;
  }
  &.ghost:hover:not(:disabled) {
    background-color: var(--bg-hover-ghost);
    color: var(--text-color-hover-ghost);
  }
  &.ghost:active:not(:disabled) {
    background-color: var(--bg-active-ghost);
  }
  &.ghost-danger:hover:not(:disabled) {
    background-color: light-dark(
      oklch(var(--danger-200) / var(--opacity-70)),
      oklch(var(--danger-700) / var(--opacity-50))
    );
    color: light-dark(oklch(var(--danger-500)), oklch(var(--danger-50)));
  }
  &.ghost-danger:active:not(:disabled) {
    background-color: light-dark(
      oklch(var(--danger-300) / var(--opacity-70)),
      oklch(var(--danger-900) / var(--opacity-70))
    );
  }
}
